<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Controller</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Leaflet.js CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Add Leaflet.js JavaScript -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- jQuery and jQuery UI (Required for Draggable) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Car Controller</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    </head>
    <div class="title-container">
        <h1 class="controller-title">DRONE HOME</h1>
    </div>
    
    <!-- Flex Container for Map and Video -->
    <div class="flex-container">
        <!-- Map Section -->
        <div class="map-container">
            <h2>Map of Current Location and Tracked Objects</h2>
            <div id="map"></div>
        </div>
    
        <!-- Video Section -->
        <div class="video-container">
            <h2>Live Webcam Feed</h2>
            <img src="{{ url_for('video_feed') }}" alt="AI Video Feed" id="video-feed">
        </div>

        <!-- Manual Controller Section -->
        <div class="controller-container">
            <h2 class="controller-title">MANUAL CONTROLLER</h2>
            <div class="controls">
                <button id="left-btn" class="control-button">Left</button>
                <button id="right-btn" class="control-button">Right</button>
            </div>
            <div class="lever-container">
                <div id="lever" class="lever"></div>
            </div>
            <p id="lever-status">Drag the lever to control speed</p>
        
            <!-- General Controls Section -->
            <div class="controls-section">
                <div class="control-mode">
                    <label>
                        <input type="radio" name="control-mode" value="manual" checked> Manual Control
                    </label>
                    <label>
                        <input type="radio" name="control-mode" value="automatic"> Automatic Control
                    </label>
                </div>
                <div class="coordinate-input">
                    <input type="text" id="coordinate" placeholder="e.g., 29.6449, -82.3481">
                    <button id="update-coordinate-btn" class="control-button">Update Target Coordinate</button>
                </div>
            </div>     
        </div>

        
    </div>

    
    
    <!-- Received Data Window -->
    <div class="data-container">
        <div class="received-data-window">
            <h3>Received Node Data</h3>
            <!-- <p><strong>Computer GPS:</strong> <span id="computer-gps"></span></p> -->
            <p><strong>Drone GPS:</strong> <span id="drone-gps"></span></p>
            <p><strong>Car Drive Status:</strong> <span id="car-drive-status"></span></p>
            <p><strong>Car GPS:</strong> <span id="car-gps"></span></p>
            <p><strong>Car Satellites:</strong> <span id="car-satellites"></span></p>
            <p><strong>Car Yaw:</strong> <span id="car-yaw"></span></p>

            <!-- <p><strong>Battery Charge:</strong> <span id="battery-level"></span></p> -->
            <p><strong>Computer → R/C Car:</strong> <span id="distance-computer-car">Waiting...</span> meters</p>
            <p><strong>R/C Car → Drone:</strong> <span id="distance-car-drone">Waiting...</span> meters</p>
            <p><strong>Drone → Computer:</strong> <span id="distance-drone-computer">Waiting...</span> meters</p>
        </div>
        
        <!-- Distance Calculation Window -->
        <div class="distance-window">
            <h3>2D Charging Probe</h3>
             <p><strong>Lever [x,y] :</strong> <span id="lever-coords">[0.00, 0.00]</span></p>
            <div id="widget">
                <div id="markerbounds">
                  <div id="box">
                    <div id="marker"></div>
                  </div>
                </div>
                <div>
                  <p id="coord"></p>
                </div>
            </div>
        </div>
        
        <!-- Output Window for Commands -->
        <div class="output-window">
            <h3>Command Log</h3>
            <div id="output-log"></div>
        </div>
    </div>
    
    <!-- Link JavaScript Files -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="{{ url_for('static', filename='js/map.js') }}"></script>
        </body>
</html>

<html>
    <link rel="stylesheet" href='/static/styles.css' />
<body>
 <img src="{{ url_for('static', filename='images/title.png') }}" alt="Site Title" class="t